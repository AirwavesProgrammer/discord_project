<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ideen einreichen</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a2e;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            flex-direction: column;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            width: 400px;
        }
        h1 {
            margin-bottom: 20px;
        }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
            border: 1px solid #555;
            color: white;
            background: #333;
            font-size: 14px;
            resize: none;
        }
        .button {
            background: #7289DA;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
            display: inline-block;
            cursor: pointer;
            border: none;
        }
        .button:hover {
            background: #5b6eae;
        }
        .button:disabled {
            background: #555;
            cursor: not-allowed;
        }
        .success-message {
            display: none;
            background-color: #28a745;
            color: white;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            font-size: 16px;
            animation: fadeIn 1s ease-in-out;
            width: 100%;
            max-width: 400px;
            margin: 20px auto;
            text-align: center;
        }
        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(-20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .cooldown-bar-container {
            width: 100%;
            background-color: #333;
            border-radius: 5px;
            height: 25px;
            margin-top: 20px;
            overflow: hidden;
        }
        .cooldown-bar {
            height: 100%;
            background-color: #5b6eae;
            transition: width 1s ease-in-out;
            border-radius: 5px;
            color: white;
            line-height: 25px;
            font-weight: bold;
            text-align: center;
            padding: 0 5px;
        }
        .language-switch {
            position: absolute;
            top: 15px;
            left: 15px;
            display: flex;
            align-items: center;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 25px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #7289DA;
            transition: .4s;
            border-radius: 25px;
        }
        .slider:before {
            position: absolute;
            content: "ðŸ‡©ðŸ‡ª";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 2px;
            transition: .4s;
        }
        input:checked + .slider {
            background-color: #5b6eae;
        }
        input:checked + .slider:before {
            content: "ðŸ‡¬ðŸ‡§";
            transform: translateX(25px);
        }

    /* Allgemeine Verbesserungen fÃ¼r responsives Design */
    body {
        padding: 20px;
    }

    /* Sicherstellen, dass das Formular auf kleineren Bildschirmen besser passt */
    .container {
        width: 90%;
        max-width: 600px; /* FÃ¼r grÃ¶ÃŸere Bildschirme */
    }

    /* Kleinere Bildschirme (Smartphones) */
    @media (max-width: 600px) {
        body {
            padding: 10px;
        }

        .container {
            padding: 20px;
            width: 95%;
        }

        h1 {
            font-size: 1.5rem;
        }

        input, textarea, select {
            font-size: 1rem;
            padding: 8px;
        }

        .button {
            font-size: 1rem;
            padding: 8px 15px;
        }
    }

    /* Tablets und mittlere BildschirmgrÃ¶ÃŸen */
    @media (min-width: 601px) and (max-width: 1024px) {
        .container {
            width: 80%;
            max-width: 500px;
        }
    }

    /* GroÃŸe Bildschirme */
    @media (min-width: 1025px) {
        .container {
            width: 50%;
            max-width: 700px;
        }
    }
</style>

</head>
<body>
    <div class="language-switch">
        <label class="switch">
            <input type="checkbox" onclick="toggleLanguage()">
            <span class="slider"></span>
        </label>
    </div>
    <div class="container">
        <h1 id="title">Deine Idee einreichen</h1>
        <p id="description">Gib deinen Discord-Namen ein und teile deine Idee mit uns!</p>
        <form id="ideaForm">
            <input type="text" id="discordName" placeholder="Dein Discord-Name" required><br>

            <!-- Modernes Select-MenÃ¼ -->
            <select id="companyType" required>
                <option id="select-placeholder" value="" disabled selected>WÃ¤hle einen Unternehmenstyp</option>
                <option id="option-adac" value="adac">ADAC</option>
                <option id="option-fire" value="feuerwehr">Feuerwehr bzw. Rettungsdienst</option>
                <option id="option-bus" value="busunternehmen">Busunternehmen</option>
                <option id="option-lkw" value="lkw-unternehmen">LKW-Unternehmen</option>
            </select>

            <textarea id="ideaText" placeholder="Gib hier deine Idee ein..." required></textarea><br>
            <button type="button" class="button" id="submitButton" onclick="submitIdea()">Absenden</button>
            <div class="success-message" id="successMessage">
                Deine Idee wurde erfolgreich gesendet!
            </div>
            <div class="cooldown-bar-container" id="cooldownContainer" style="display:none;">
                <div class="cooldown-bar" id="cooldownBar">5:00</div>
            </div>
        </form>
    </div>

    <script>
        let currentLang = 'de';
        let cooldown = false;
        let cooldownTime = 300; // 5 Minuten (300 Sekunden)
        let remainingTime = localStorage.getItem('cooldownTime') ? parseInt(localStorage.getItem('cooldownTime')) : cooldownTime;

        // Falls der Wert in localStorage negativ oder undefiniert ist, zurÃ¼cksetzen
        if (remainingTime < 0 || isNaN(remainingTime)) {
            remainingTime = cooldownTime;
        }

        let countdownInterval;

        // Start countdown if cooldown is active
        if (remainingTime < cooldownTime) {
            cooldown = true;
            startCountdown();
        }

        function toggleLanguage() {
            const translations = {
                de: { 
                    title: "Deine Idee einreichen", 
                    description: "Gib deinen Discord-Namen ein und teile deine Idee mit uns!", 
                    discordPlaceholder: "Dein Discord-Name", 
                    ideaPlaceholder: "Gib hier deine Idee ein...", 
                    submitButton: "Absenden", 
                    successMessage: "Deine Idee wurde erfolgreich gesendet!",
                    selectPlaceholder: "WÃ¤hle einen Unternehmenstyp",
                    adac: "ADAC",
                    fire: "Feuerwehr bzw. Rettungsdienst",
                    bus: "Busunternehmen",
                    lkw: "LKW-Unternehmen"
                },
                en: { 
                    title: "Submit Your Idea", 
                    description: "Enter your Discord name and share your idea with us!", 
                    discordPlaceholder: "Your Discord Name", 
                    ideaPlaceholder: "Enter your idea here...", 
                    submitButton: "Submit", 
                    successMessage: "Your idea was successfully submitted!",
                    selectPlaceholder: "Select a company type",
                    adac: "ADAC",
                    fire: "Fire Department / Emergency Services",
                    bus: "Bus Company",
                    lkw: "Truck Company"
                }
            };

            currentLang = currentLang === "de" ? "en" : "de";

            document.getElementById("title").innerText = translations[currentLang].title;
            document.getElementById("description").innerText = translations[currentLang].description;
            document.getElementById("discordName").placeholder = translations[currentLang].discordPlaceholder;
            document.getElementById("ideaText").placeholder = translations[currentLang].ideaPlaceholder;
            document.getElementById("submitButton").innerText = translations[currentLang].submitButton;
            document.getElementById("successMessage").innerText = translations[currentLang].successMessage;

            // Select-MenÃ¼ Ãœbersetzung
            document.getElementById("select-placeholder").innerText = translations[currentLang].selectPlaceholder;
            document.getElementById("option-adac").innerText = translations[currentLang].adac;
            document.getElementById("option-fire").innerText = translations[currentLang].fire;
            document.getElementById("option-bus").innerText = translations[currentLang].bus;
            document.getElementById("option-lkw").innerText = translations[currentLang].lkw;
        }

    function submitIdea() {
    if (cooldown) return;
    cooldown = true;
    const button = document.getElementById("submitButton");
    button.disabled = true;

    const discordName = document.getElementById("discordName").value.trim();
    const idea = document.getElementById("ideaText").value.trim();
    const companyType = document.getElementById("companyType").value;

    if (!companyType) {
        alert(currentLang === 'de' ? "Bitte wÃ¤hle einen Unternehmenstyp!" : "Please select a company type!");
        button.disabled = false;
        cooldown = false;
        return;
    }

    // Ãœbersetzungs-Map fÃ¼r Unternehmenstypen
    const companyTranslations = {
        "adac": { de: "ADAC", en: "ADAC" },
        "feuerwehr": { de: "Feuerwehr bzw. Rettungsdienst", en: "Fire Department / Emergency Services" },
        "busunternehmen": { de: "Busunternehmen", en: "Bus Company" },
        "lkw-unternehmen": { de: "LKW-Unternehmen", en: "Truck Company" }
    };

    const selectedCompany = companyTranslations[companyType] ? companyTranslations[companyType][currentLang] : "Unbekannt";

    const webhookUrl = "https://discord.com/api/webhooks/1355978405325049956/dk6mtbVJ1u6HuH2uctqxgDifw6bg6qVG3Wm6QwAQMLcFPgpOJ6U-ltfYsFqYIrp08Lmu";

    fetch(webhookUrl, { 
        method: "POST", 
        headers: { "Content-Type": "application/json" }, 
        body: JSON.stringify({ 
            content: `**Von:** ${discordName}\n**Unternehmen:** ${selectedCompany}\n**Idee:** ${idea}` 
        })
    })
    .then(response => {
        if (response.ok) {
            document.getElementById("successMessage").style.display = "block";

            // **Neu: Formular leeren**
            document.getElementById("ideaForm").reset();

            setTimeout(() => document.getElementById("successMessage").style.display = "none", 4000);
        } else {
            alert(currentLang === 'de' ? "Es gab einen Fehler beim Senden der Idee." : "There was an error submitting your idea.");
        }
    })
    .catch(error => {
        console.error("Fehler beim Senden an Discord:", error);
        alert(currentLang === 'de' ? "Es gab einen Fehler beim Senden der Idee." : "There was an error submitting your idea.");
    });

    remainingTime = cooldownTime;
    startCountdown();
}
        
        function startCountdown() {
            const button = document.getElementById("submitButton");
            const cooldownContainer = document.getElementById("cooldownContainer");
            const cooldownBar = document.getElementById("cooldownBar");

            const updateCooldownBar = () => {
            let minutes = Math.floor(remainingTime / 60);
            let seconds = remainingTime % 60;
            let formattedTime = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            cooldownBar.innerText = formattedTime;
            cooldownBar.style.width = `${(remainingTime / cooldownTime) * 100}%`;
            cooldownContainer.style.display = cooldown ? "block" : "none";
            localStorage.setItem('cooldownTime', remainingTime); // Cooldown speichern
    };

        countdownInterval = setInterval(() => {
        if (remainingTime <= 0) {
            clearInterval(countdownInterval);
            cooldown = false;
            button.disabled = false;
            button.innerText = currentLang === 'de' ? "Absenden" : "Submit";
            cooldownContainer.style.display = "none";
            localStorage.removeItem('cooldownTime'); // Cooldown zurÃ¼cksetzen
        } else {
            remainingTime--;
            updateCooldownBar();
        }
    }, 1000);
    updateCooldownBar(); // Initiales Update
    }

    document.addEventListener("DOMContentLoaded", () => {
            const button = document.getElementById("submitButton");

            if (remainingTime > 0 && remainingTime < cooldownTime) {
                cooldown = true;
                button.disabled = true;
                startCountdown();
            }
        });
    </script>
</body>
</html>





